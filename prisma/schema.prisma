generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}



model User{
  id        String   @id @default(uuid())
  ceatedAt  DateTime @default(now())
  updatedAt DateTime @updatedAt()

  name String
  surname String?
  
  accessTokens    AccessToken[]
  emailProviders EmailProvider[]
  myFavorites MyFavorite[]
}

model AccessToken{
  id        String   @id @default(uuid())
  ceatedAt  DateTime @default(now())
  updatedAt DateTime @updatedAt()

  token       String @unique
  expiresIn   DateTime 

  userId String
  user User @relation(fields: [userId],references: [id])
}

model EmailProvider{
  id        String   @id @default(uuid())
  ceatedAt  DateTime @default(now())
  updatedAt DateTime @updatedAt()

  email         String
  passwordhash  String

  userId String
  user User @relation(fields: [userId],references: [id])
}



// model MyFavoriteList{
//   id        String   @id @default(uuid())
//   ceatedAt  DateTime @default(now())
//   updatedAt DateTime @updatedAt()

//   myFavorites MyFavorite[]
// }
model MyFavorite{  
  id        String   @id @default(uuid())
  ceatedAt  DateTime @default(now())

  userId String
  user User @relation(fields: [userId],references: [id])

  itemId String
  item Item @relation(fields: [itemId],references: [id])
}


model MyTempFavoriteList{
  id        String   @id @default(uuid())
  ceatedAt  DateTime @default(now())
  updatedAt DateTime @updatedAt()

  myFavorites MyTempFavorite[]
}

model MyTempFavorite{  
  id        String   @id @default(uuid())
  ceatedAt  DateTime @default(now())

  myFavoriteListId String
  myFavoriteList MyTempFavoriteList @relation(fields: [myFavoriteListId],references: [id])

  itemId String
  item Item @relation(fields: [itemId],references: [id])
}


model Item{
  id        String @id @default(uuid())
  ceatedAt  DateTime @default(now())
  updatedAt DateTime @updatedAt()
  
  lable String
  price Int

  imageId String?
  image Image? @relation(fields: [imageId],references: [id])

  myFavorites MyFavorite[]
  myTempFavorites MyTempFavorite[]
}

model Image{
  id String @id @unique @default(uuid())

  createAt DateTime @default(now())

  type String
  size Int
  buffer Bytes

  
  items Item[]
}
